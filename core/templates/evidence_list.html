{% extends "base.html" %}
{% block content %}
<h2>Your Evidences</h2>

<!-- ✅ Evidence Upload Form -->
<div class="card" style="margin-bottom: 1rem;">
  <h3>Upload New Evidence</h3>
  {% if user.role == "citizen" %}
  <form method="post" enctype="multipart/form-data" action="/api/upload-evidence/">
    {% csrf_token %}
    <div style="margin-bottom: 0.5rem;">
      <input type="text" name="title" placeholder="Enter title" required class="input" style="width: 100%; padding: 8px;">
    </div>
    <div style="margin-bottom: 0.5rem;">
      <select name="file_type" class="input" style="width: 100%; padding: 8px;">
        <option value="image">Image</option>
        <option value="pdf">PDF</option>
        <option value="video">Video</option>
        <option value="doc">Document</option>
        <option value="other" selected>Other</option>
      </select>
    </div>
    <div style="margin-bottom: 0.5rem;">
      <input type="file" name="file" required style="width: 100%; padding: 6px;">
    </div>
    <button type="submit" class="btn">Upload Evidence</button>
  </form>
  {% endif %}
</div>

<!-- ✅ Evidence List -->
{% for e in evidences %}
<div class="card">
  <strong>{{ e.title }}</strong><br>
  Type: {{ e.file_type }} | Status: {{ e.verification_status }}<br>
  <a href="{{ e.file.url }}" target="_blank">View File</a>
</div>
{% empty %}
<p>No evidences yet.</p>
{% endfor %}
{% endblock %}

<script>
  document.querySelector("form").addEventListener("submit", () => {
  showToast("Uploading evidence...");
});
</script>
